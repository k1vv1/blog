---
title: vue路由事件beforeRouteLeave及组件内定时器的清除
date: 2021-12-04
tags: [beforeRouteLeave]
---

## 一、背景

之前在做项目时，需要每隔 1 分钟调用一次后台业务接口，

所以我在逻辑中添加了一个定时器，

此为背景

<!-- more -->

最开始我是将定时器声明在组件内部的，

然后在组件内使用 beforeRouteLeave 在页面离开时清除定时器

然而发现也没能将定时器清除，后来走 debug 发现根本就没有进到这个方法中去。

## 二、解决

后来查阅网上资料，发现需要将路由离开事件的代码放到配置了路由的界面中，我试了一下，果然好使，定时器成功清除。

## 三、总结

vue 的 beforeRouteEnter 和 beforeRouteLeave 都要写在配置了路由的界面中才能出发，写在界面所调用的组件内部无法触发。
