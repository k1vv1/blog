---
title: 引入字体文件导致首页加载过慢踩坑
date: 2022-06-12
tags: [字体, 优化]
---

## 一、前言

在日常做项目时，经常会遇到使用各种字体的情况，

字体包少的时候还好，一个最多也就几百几千kb，

但是字体包一多的话可能就有好几兆甚至数十兆了，

直接就会导致项目首页加载缓慢，极其影响用户体验。

<!-- more -->

## 二、解决方案

### 第一步

全局安装font-spider包：

> npm install font-spider -g

### 第二步

输入：`font-spider -V`确保已经安装完成;

将你要压缩的字体文件放到一个font文件夹中和css、html平级

html文件要引入对应的css文件，且css文件要这么写：

```css
@font-face {
      font-family: 'zt';
      src: url('../font/这里是你的字体名称.otf');
      font-weight: normal;
      font-style: normal;
}
.test {
    font-family: 'zt';
}
```

在html文件中写入你想要变更的字，

然后应用css文件的字体样式即可。

### 第三步

输入: `font-spider *.html` (ps: 这个.html是包含文件夹下所用的html，输入你引用的html路径即可)

然后  回车

你就能看到多了一个`.font-spider`文件夹，这里面就是是原来的字体包文件，

而同级文件夹下的字体文件就是压缩后的字体文件, 可以直接引用到你的项目中去。

## 总结

新得到的包的大小是根据html文件中输入的字的多少而压缩来的，

简单来说就是，这个字体包之所以压缩这么小，是因为它在压缩过程中只挑选了你需要的，舍弃了你不需要的

比如我在`index.html`文件中的文字为

> 1234567890

那么压缩后的字体包就只包含这些数字，

而使用中如果字为其他汉字就不生效了，

所以这个方法也只是适用于一些明确的字来变更字体，

如果需要变更的字体是随机不确定的，那么该完整引入还是得乖乖完整引入。

以上。
